#!/usr/bin/env ruby

require 'rubygems'
require 'kafo'


unless system("subscription-manager identity | grep identity")
  puts "The system has to be registered to a Katello instance before installing the node"
  exit 30
end

KafoConfigure.run

KafoConfigure.exit_code < 10 ? exit(0) : exit(KafoConfigure.exit_code)
